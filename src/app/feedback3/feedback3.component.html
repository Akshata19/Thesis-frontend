<div class="scroll-wrapper">
  <div class="form-header">
    <div class="form-title">
      <i class="fas fa-robot"></i>
      <span>{{ chatbotVersion }} Feedback Form</span>
    </div>
    <button
      class="icon-only"
      aria-label="Close feedback form"
      (click)="cancel()"
    >
      <i class="fas fa-times"></i>
    </button>
  </div>

  <div class="feedback-intro">
    <p>
      <i class="fas fa-info-circle"></i> Weâ€™re evaluating user experience in
      chatbot interfaces. Please assess how each interface element contributed
      to usability, communication clarity, and interaction flow.
    </p>
    <p class="highlight">
      Only relevant design elements are listed. Your feedback will guide future
      chatbot UI improvements.
    </p>
    <p class="scale">
      (Use a scale from <strong>1 = Poor</strong> to
      <strong>5 = Excellent</strong>.)
    </p>
  </div>

  <form *ngIf="!submitted" [formGroup]="feedbackForm" (ngSubmit)="onSubmit()">
    <fieldset>
      <legend><i class="fas fa-user"></i> User Identifier</legend>
      <div class="form-group">
        <label for="name">
          Please enter the unique identifier you provided at the beginning of
          the survey (the first two letters of your mother's name in capital
          letters, followed by the last two digits of your birth year):
        </label>
        <input
          id="name"
          type="text"
          formControlName="name"
          placeholder="e.g., Sa1203"
        />
      </div>
    </fieldset>

    <h5 style="color: #2980b9">
      <i class="fas fa-star"></i> Interface Evaluation
    </h5>

    <div class="rating-group">
      <label>
        How much did you like the chat message design?
        <br />
        <small>1 = Didn't like at all, 5 = Liked very much</small>
        >
      </label>
      <div class="stars">
        <ng-container *ngFor="let rating of [5, 4, 3, 2, 1]">
          <input
            type="radio"
            id="chatMessage-{{ rating }}"
            name="chatMessage"
            formControlName="chatMessage"
            [value]="rating"
          />
          <label for="chatMessage-{{ rating }}">&#9733;</label>
        </ng-container>
      </div>
    </div>

    <div class="rating-group">
      <label>
        How much did you like the list-style quick reply buttons?
        <small>1 = Didn't like at all, 5 = Liked very much</small>
      </label>
      <div class="stars">
        <ng-container *ngFor="let rating of [5, 4, 3, 2, 1]">
          <input
            type="radio"
            id="quickReply-{{ rating }}"
            name="quickReply"
            formControlName="quickReply"
            [value]="rating"
          />
          <label for="quickReply-{{ rating }}">&#9733;</label>
        </ng-container>
      </div>
    </div>

    <div class="rating-group">
      <label>
        How much did you like the typing indicator which displayed when bot was
        generating response? <br />
        <small>1 = Didn't like at all, 5 = Liked very much</small>
      </label>
      <div class="stars">
        <ng-container *ngFor="let rating of [5, 4, 3, 2, 1]">
          <input
            type="radio"
            id="typingIndicator-{{ rating }}"
            name="typingIndicator"
            formControlName="typingIndicator"
            [value]="rating"
          />
          <label for="typingIndicator-{{ rating }}">&#9733;</label>
        </ng-container>
      </div>
    </div>

    <div class="rating-group">
      <label>
        How much did you like the close chat and conversation ending process?
        <br />
        <small>1 = Didn't like at all, 5 = Liked very much</small>
      </label>
      <div class="stars">
        <ng-container *ngFor="let rating of [5, 4, 3, 2, 1]">
          <input
            type="radio"
            id="conversationClosure-{{ rating }}"
            name="conversationClosure"
            formControlName="conversationClosure"
            [value]="rating"
          />
          <label for="conversationClosure-{{ rating }}">&#9733;</label>
        </ng-container>
      </div>
    </div>

    <div class="rating-group">
      <label>
        How much did you like the timestamp after each bot and user message?
        <br />
        <small>1 = Didn't like at all, 5 = Liked very much</small>
      </label>
      <div class="stars">
        <ng-container *ngFor="let rating of [5, 4, 3, 2, 1]">
          <input
            type="radio"
            id="informationStamp-{{ rating }}"
            name="informationStamp"
            formControlName="informationStamp"
            [value]="rating"
          />
          <label for="informationStamp-{{ rating }}">&#9733;</label>
        </ng-container>
      </div>
    </div>

    <label
      ><i class="fas fa-comment"></i> Would you like to suggest or tell anything
      about the chat bot user interface:
      <textarea formControlName="comments"></textarea>
    </label>

    <button class="submit" type="submit">
      <i class="fas fa-paper-plane"></i> Submit Feedback
    </button>
  </form>

  <div *ngIf="submitted" class="thank-you">
    <i class="fas fa-check-circle"></i>
    <p>Thank you for your feedback! You may now close this window.</p>
  </div>
</div>
